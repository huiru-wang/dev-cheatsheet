import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.fd95ed2e.js";const h=JSON.parse('{"title":"case when 聚合函数","description":"","frontmatter":{},"headers":[],"relativePath":"MySQL/case-when.md","filePath":"MySQL/case-when.md"}'),p={name:"MySQL/case-when.md"},o=l(`<h2 id="两种基本用法" tabindex="-1">两种基本用法 <a class="header-anchor" href="#两种基本用法" aria-label="Permalink to &quot;两种基本用法&quot;">​</a></h2><p>1、值</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> [column] </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">when</span><span style="color:#E1E4E8;"> [key1] </span><span style="color:#F97583;">then</span><span style="color:#E1E4E8;"> [value1]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">when</span><span style="color:#E1E4E8;"> [key2] </span><span style="color:#F97583;">then</span><span style="color:#E1E4E8;"> [value2]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">ELSE</span><span style="color:#E1E4E8;"> [value3] </span></span>
<span class="line"><span style="color:#F97583;">END</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">case</span><span style="color:#24292E;"> [column] </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">when</span><span style="color:#24292E;"> [key1] </span><span style="color:#D73A49;">then</span><span style="color:#24292E;"> [value1]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">when</span><span style="color:#24292E;"> [key2] </span><span style="color:#D73A49;">then</span><span style="color:#24292E;"> [value2]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">ELSE</span><span style="color:#24292E;"> [value3] </span></span>
<span class="line"><span style="color:#D73A49;">END</span></span></code></pre></div><p>2、表达式</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">when</span><span style="color:#E1E4E8;"> [condition1] </span><span style="color:#F97583;">then</span><span style="color:#E1E4E8;"> [value1]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">when</span><span style="color:#E1E4E8;"> [condition2] </span><span style="color:#F97583;">then</span><span style="color:#E1E4E8;"> [value2]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">ELSE</span><span style="color:#E1E4E8;"> [value3] </span></span>
<span class="line"><span style="color:#F97583;">END</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">case</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">when</span><span style="color:#24292E;"> [condition1] </span><span style="color:#D73A49;">then</span><span style="color:#24292E;"> [value1]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">when</span><span style="color:#24292E;"> [condition2] </span><span style="color:#D73A49;">then</span><span style="color:#24292E;"> [value2]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">ELSE</span><span style="color:#24292E;"> [value3] </span></span>
<span class="line"><span style="color:#D73A49;">END</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">-- tree结构 输出节点类型</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#E1E4E8;">| id | p_id |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">NULL</span><span style="color:#E1E4E8;"> |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">CASE</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">WHEN</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">p_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">IS</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">NULL</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">THEN</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Root&#39;</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;">-- null 为根节点</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">WHEN</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">IN</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> p_id </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> tree) </span><span style="color:#F97583;">THEN</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Inner&#39;</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">-- pid中存在id 为非叶子节点</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">ELSE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Leaf&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">END</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">AS</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">-- pid中存在id，为叶子节点</span></span>
<span class="line"><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> tree t</span></span>
<span class="line"><span style="color:#F97583;">ORDER BY</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">t</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----+-------+</span></span>
<span class="line"><span style="color:#E1E4E8;">| id | </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">  |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----+-------+</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">Root</span><span style="color:#E1E4E8;">  |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> | Inner |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> | Leaf  |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> | Leaf  |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> | Leaf  |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----+-------+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- tree结构 输出节点类型</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#24292E;">| id | p_id |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;"> |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">, </span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#D73A49;">CASE</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">WHEN</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">p_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IS</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">THEN</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Root&#39;</span><span style="color:#24292E;">     </span><span style="color:#6A737D;">-- null 为根节点</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">WHEN</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IN</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> p_id </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> tree) </span><span style="color:#D73A49;">THEN</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Inner&#39;</span><span style="color:#24292E;">   </span><span style="color:#6A737D;">-- pid中存在id 为非叶子节点</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">ELSE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Leaf&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">END</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">AS</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">-- pid中存在id，为叶子节点</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> tree t</span></span>
<span class="line"><span style="color:#D73A49;">ORDER BY</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----+-------+</span></span>
<span class="line"><span style="color:#24292E;">| id | </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">  |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----+-------+</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">Root</span><span style="color:#24292E;">  |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> | Inner |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> | Leaf  |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;"> | Leaf  |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> | Leaf  |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----+-------+</span></span></code></pre></div><h1 id="case-when-聚合函数" tabindex="-1">case when 聚合函数 <a class="header-anchor" href="#case-when-聚合函数" aria-label="Permalink to &quot;case when 聚合函数&quot;">​</a></h1><h1 id="case-when-变量" tabindex="-1">case when 变量 <a class="header-anchor" href="#case-when-变量" aria-label="Permalink to &quot;case when 变量&quot;">​</a></h1>`,8),e=[o];function c(t,r,E,y,i,F){return n(),a("div",null,e)}const D=s(p,[["render",c]]);export{h as __pageData,D as default};
