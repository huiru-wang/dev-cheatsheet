import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.fd95ed2e.js";const h=JSON.parse('{"title":"MySQL常用SQL","description":"","frontmatter":{},"headers":[],"relativePath":"MySQL/常用SQL.md","filePath":"MySQL/常用SQL.md"}'),p={name:"MySQL/常用SQL.md"},o=l(`<h1 id="mysql常用sql" tabindex="-1">MySQL常用SQL <a class="header-anchor" href="#mysql常用sql" aria-label="Permalink to &quot;MySQL常用SQL&quot;">​</a></h1><h2 id="ddl" tabindex="-1">DDL <a class="header-anchor" href="#ddl" aria-label="Permalink to &quot;DDL&quot;">​</a></h2><h3 id="新增-删除列" tabindex="-1">新增/删除列 <a class="header-anchor" href="#新增-删除列" aria-label="Permalink to &quot;新增/删除列&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">ADD</span><span style="color:#E1E4E8;"> [column_name] </span><span style="color:#F97583;">VARCHAR</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">255</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">DEFAULT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">NULL</span><span style="color:#E1E4E8;"> comment </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">DROP</span><span style="color:#E1E4E8;"> [column_name];</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">ADD</span><span style="color:#24292E;"> [column_name] </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">255</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;"> comment </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> [column_name];</span></span></code></pre></div><h3 id="修改列" tabindex="-1">修改列 <a class="header-anchor" href="#修改列" aria-label="Permalink to &quot;修改列&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">MODIFY</span><span style="color:#E1E4E8;"> [column_name] </span><span style="color:#F97583;">DEFAULT</span><span style="color:#E1E4E8;"> [value];</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">MODIFY</span><span style="color:#24292E;"> [column_name] </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;"> [value];</span></span></code></pre></div><h3 id="修改列的默认值" tabindex="-1">修改列的默认值 <a class="header-anchor" href="#修改列的默认值" aria-label="Permalink to &quot;修改列的默认值&quot;">​</a></h3><p>会复制表，效率比较低：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">MODIFY</span><span style="color:#E1E4E8;"> [column_name] </span><span style="color:#F97583;">DEFAULT</span><span style="color:#E1E4E8;"> [value];</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">MODIFY</span><span style="color:#24292E;"> [column_name] </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;"> [value];</span></span></code></pre></div><p>直接修改.frm文件中的列定义，效率高：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> [column_name] </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">DEFAULT</span><span style="color:#E1E4E8;"> [value];</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> [column_name] </span><span style="color:#D73A49;">SET</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;"> [value];</span></span></code></pre></div><h2 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-label="Permalink to &quot;索引&quot;">​</a></h2><h3 id="索引命名" tabindex="-1">索引命名 <a class="header-anchor" href="#索引命名" aria-label="Permalink to &quot;索引命名&quot;">​</a></h3><ul><li>主键：<code>pk_[field]</code></li><li>唯一索引：<code>uk_[column]_[column]</code></li><li>普通联合索引：<code>idx_[column]_[column]</code></li><li>全文索引：<code>ft_[column]</code></li></ul><h3 id="创建索引" tabindex="-1">创建索引 <a class="header-anchor" href="#创建索引" aria-label="Permalink to &quot;创建索引&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">ADD</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">INDEX</span><span style="color:#E1E4E8;"> [index_name] (column, column, column);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">ADD</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">UNIQUE</span><span style="color:#E1E4E8;"> (column);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">ADD</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">PRIMARY KEY</span><span style="color:#E1E4E8;"> (column);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">INDEX</span><span style="color:#E1E4E8;"> [index_name] </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> [table_name] (column, column, column);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">UNIQUE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">INDEX</span><span style="color:#E1E4E8;"> [index_name] </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> [table_name] (column_list);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FULLTEXT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">INDEX</span><span style="color:#E1E4E8;"> [index_name] </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> [table_name] (column_list);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">ADD</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">INDEX</span><span style="color:#24292E;"> [index_name] (column, column, column);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">ADD</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">UNIQUE</span><span style="color:#24292E;"> (column);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">ADD</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;"> (column);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">INDEX</span><span style="color:#24292E;"> [index_name] </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> [table_name] (column, column, column);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">UNIQUE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">INDEX</span><span style="color:#24292E;"> [index_name] </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> [table_name] (column_list);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FULLTEXT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">INDEX</span><span style="color:#24292E;"> [index_name] </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> [table_name] (column_list);</span></span></code></pre></div><h3 id="删除索引" tabindex="-1">删除索引 <a class="header-anchor" href="#删除索引" aria-label="Permalink to &quot;删除索引&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">DROP</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">INDEX</span><span style="color:#E1E4E8;"> [index_name] </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> [table_name]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">DROP</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">INDEX</span><span style="color:#E1E4E8;"> [index_name]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> [table_name] </span><span style="color:#F97583;">DROP</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">PRIMARY KEY</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">INDEX</span><span style="color:#24292E;"> [index_name] </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> [table_name]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">INDEX</span><span style="color:#24292E;"> [index_name]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> [table_name] </span><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span></span></code></pre></div><h3 id="建表时创建索引" tabindex="-1">建表时创建索引 <a class="header-anchor" href="#建表时创建索引" aria-label="Permalink to &quot;建表时创建索引&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">IF</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">NOT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">EXISTS</span><span style="color:#E1E4E8;"> t_table (</span></span>
<span class="line"><span style="color:#E1E4E8;"> ....</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">INDEX</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`idx_startTime_category\`</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">\`startTime\`</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">\`category\`</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">) ENGINE </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> InnoDB</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">DEFAULT</span><span style="color:#E1E4E8;"> CHARSET </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> utf8</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">COLLATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> utf8_general_ci</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">NOT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> t_table (</span></span>
<span class="line"><span style="color:#24292E;"> ....</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">INDEX</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`idx_startTime_category\`</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">\`startTime\`</span><span style="color:#24292E;">, </span><span style="color:#032F62;">\`category\`</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">) ENGINE </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> InnoDB</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;"> CHARSET </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> utf8</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">COLLATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> utf8_general_ci</span></span></code></pre></div><h3 id="查看索引" tabindex="-1">查看索引 <a class="header-anchor" href="#查看索引" aria-label="Permalink to &quot;查看索引&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">SHOW </span><span style="color:#F97583;">INDEX</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> t_table</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">SHOW </span><span style="color:#D73A49;">INDEX</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> t_table</span></span></code></pre></div><h2 id="系统级sql" tabindex="-1">系统级SQL <a class="header-anchor" href="#系统级sql" aria-label="Permalink to &quot;系统级SQL&quot;">​</a></h2><h3 id="查看修改隔离级别" tabindex="-1">查看修改隔离级别 <a class="header-anchor" href="#查看修改隔离级别" aria-label="Permalink to &quot;查看修改隔离级别&quot;">​</a></h3><p>当前隔离级别：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">show variables </span><span style="color:#F97583;">like</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;transaction_isolation&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">show variables </span><span style="color:#D73A49;">like</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;transaction_isolation&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><p>修改当前SESSION的隔离级别：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">SESSION</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TRANSACTION</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">ISOLATION</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">LEVEL</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">READ</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">COMMITTED</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">SET</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">SESSION</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TRANSACTION</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">ISOLATION</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">LEVEL</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">READ</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">COMMITTED</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="查看活跃事务" tabindex="-1">查看活跃事务 <a class="header-anchor" href="#查看活跃事务" aria-label="Permalink to &quot;查看活跃事务&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> trx_id,trx_state,trx_started,trx_isolation_level </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">INFORMATION_SCHEMA</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">INNODB_TRX</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> trx_id,trx_state,trx_started,trx_isolation_level </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">INFORMATION_SCHEMA</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">INNODB_TRX</span><span style="color:#24292E;">;</span></span></code></pre></div><ul><li>trx_id 是事务的唯一标识符</li><li>trx_state 表示事务的当前状态</li><li>trx_started 是事务启动的时间戳</li><li>trx_isolation_level 是事务的隔离级别</li><li>trx_unique_checks 表示是否启用唯一键约束的检查</li><li>trx_foreign_key_checks 表示是否启用外键约束的检查</li></ul><h3 id="关闭自动提交" tabindex="-1">关闭自动提交 <a class="header-anchor" href="#关闭自动提交" aria-label="Permalink to &quot;关闭自动提交&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">set</span><span style="color:#E1E4E8;"> @@autocommit</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">set</span><span style="color:#24292E;"> @@autocommit</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="查看是否锁表" tabindex="-1">查看是否锁表 <a class="header-anchor" href="#查看是否锁表" aria-label="Permalink to &quot;查看是否锁表&quot;">​</a></h3><ol><li>查看正在使用的表</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">SHOW </span><span style="color:#F97583;">OPEN</span><span style="color:#E1E4E8;"> TABLES </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> In_use </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----------+--------+--------+-------------+</span></span>
<span class="line"><span style="color:#E1E4E8;">| </span><span style="color:#F97583;">Database</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">Table</span><span style="color:#E1E4E8;">  | In_use | Name_locked |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----------+--------+--------+-------------+</span></span>
<span class="line"><span style="color:#E1E4E8;">| test     | t_user |      </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> |           </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----------+--------+--------+-------------+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">SHOW </span><span style="color:#D73A49;">OPEN</span><span style="color:#24292E;"> TABLES </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> In_use </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----------+--------+--------+-------------+</span></span>
<span class="line"><span style="color:#24292E;">| </span><span style="color:#D73A49;">Database</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">Table</span><span style="color:#24292E;">  | In_use | Name_locked |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----------+--------+--------+-------------+</span></span>
<span class="line"><span style="color:#24292E;">| test     | t_user |      </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> |           </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----------+--------+--------+-------------+</span></span></code></pre></div><ol start="2"><li>查看事务状态</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> trx_id,trx_state,trx_started,trx_isolation_level </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">INFORMATION_SCHEMA</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">INNODB_TRX</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">--------+-----------+---------------------+---------------------+</span></span>
<span class="line"><span style="color:#E1E4E8;">| trx_id | trx_state | trx_started         | trx_isolation_level |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">--------+-----------+---------------------+---------------------+</span></span>
<span class="line"><span style="color:#E1E4E8;">|   </span><span style="color:#79B8FF;">5545</span><span style="color:#E1E4E8;"> | LOCK WAIT | </span><span style="color:#79B8FF;">2023</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">05</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">03</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">19</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">31</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">05</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">REPEATABLE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">READ</span><span style="color:#E1E4E8;">     |</span></span>
<span class="line"><span style="color:#E1E4E8;">|   </span><span style="color:#79B8FF;">5544</span><span style="color:#E1E4E8;"> | RUNNING   | </span><span style="color:#79B8FF;">2023</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">05</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">03</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">19</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">40</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">REPEATABLE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">READ</span><span style="color:#E1E4E8;">     |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">--------+-----------+---------------------+---------------------+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> trx_id,trx_state,trx_started,trx_isolation_level </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">INFORMATION_SCHEMA</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">INNODB_TRX</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">--------+-----------+---------------------+---------------------+</span></span>
<span class="line"><span style="color:#24292E;">| trx_id | trx_state | trx_started         | trx_isolation_level |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">--------+-----------+---------------------+---------------------+</span></span>
<span class="line"><span style="color:#24292E;">|   </span><span style="color:#005CC5;">5545</span><span style="color:#24292E;"> | LOCK WAIT | </span><span style="color:#005CC5;">2023</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">05</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">03</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">19</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">31</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">05</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">REPEATABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">READ</span><span style="color:#24292E;">     |</span></span>
<span class="line"><span style="color:#24292E;">|   </span><span style="color:#005CC5;">5544</span><span style="color:#24292E;"> | RUNNING   | </span><span style="color:#005CC5;">2023</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">05</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">03</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">19</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">30</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">40</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">REPEATABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">READ</span><span style="color:#24292E;">     |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">--------+-----------+---------------------+---------------------+</span></span></code></pre></div>`,38),e=[o];function t(c,r,E,y,i,d){return a(),n("div",null,e)}const F=s(p,[["render",t]]);export{h as __pageData,F as default};
